<!DOCTYPE html>
<html lang="en">
  <!--partial template-->
  <%- include("./partials/head.ejs") %>
  <body>
    <h1>Submit a Blog</h1>
    <h2>Your path to becoming a Node.js expert</h2>

    <!--partial template-->
    <%- include("./partials/nav.ejs") %>
<body>
    <div>
        <h2><%- blog.title %></h2>
        <div>
            <p><%- blog.body %></p>
        </div>
        <a class="delete" data-doc="<%= blog._id %>">delete</a>
    </div>
     <!--partial template-->
     <%- include("./partials/footer.ejs") %>
</body>
<script>
    const trashCan = document.querySelector("a.delete")
    trashCan.addEventListener("click",(e)=>{
        const endpoint = `/blogs/${trashCan.dataset.doc}`
        fetch(endpoint,{
            method:"DELETE",
        }).then((res)=>{
            res.json()
        }).then((data)=>window.location.href = data.redirect).catch((err)=>console.log(err))
    })
</script>
</html>